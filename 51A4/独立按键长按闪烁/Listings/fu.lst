C51 COMPILER V9.60.0.0   FU                                                                11/07/2022 17:28:48 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE FU
OBJECT MODULE PLACED IN .\Objects\fu.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE fu.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\fu.lst
                    -) OBJECT(.\Objects\fu.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          typedef unsigned char u8;
   4          typedef unsigned int u16;
   5          
   6          sbit KEY1=P3^1;
   7          sbit KEY2=P3^0;
   8          sbit KEY3=P3^2;
   9          sbit KEY4=P3^3;
  10          
  11          sbit LED1=P2^0;
  12          sbit LED2=P2^1;
  13          sbit LED3=P2^2;
  14          sbit LED4=P2^3;
  15          
  16          #define KEY1_PRESS 1
  17          #define KEY2_PRESS 2
  18          #define KEY3_PRESS 3
  19          #define KEY4_PRESS 4
  20          #define KEY_UNPRESS 0
  21          
  22          void delay_nms(u16 n)
  23          {
  24   1              while(n--)
  25   1              {
  26   2                      unsigned char a,b,c;
  27   2                      for(c=1;c>0;c--)
  28   2                              for(b=142;b>0;b--)
  29   2                                      for(a=2;a>0;a--);       
  30   2              }
  31   1      }
  32          
  33          u8 key_scan(u8 mode)
  34          {
  35   1              static u8 key=1;
  36   1              if(mode)
  37   1                      key=1;
  38   1              if(key==1 && (KEY1==0 || KEY2==0 || KEY3==0 || KEY4==0))
  39   1              {
  40   2                      delay_nms(10);//消抖
  41   2                      key=0;
  42   2                      if(KEY1==0)
  43   2                              return KEY1_PRESS;
  44   2                      else if(KEY2==0)
  45   2                              return KEY2_PRESS;
  46   2                      else if(KEY3==0)
  47   2                              return KEY3_PRESS;
  48   2                      else if(KEY4==0)
  49   2                              return KEY4_PRESS;
  50   2              }
  51   1              else if(KEY1==1 && KEY2==1 && KEY3==1 && KEY4==1)
  52   1              {
  53   2                      key=1;
  54   2              }
C51 COMPILER V9.60.0.0   FU                                                                11/07/2022 17:28:48 PAGE 2   

  55   1              return KEY_UNPRESS;
  56   1      }
  57          
  58          void main()
  59          {
  60   1              u8 key=0;
  61   1              while(1)
  62   1              {
  63   2                      key=key_scan(1);
  64   2                      if(key==KEY1_PRESS)
  65   2                      {
  66   3                              LED1=~LED1;
  67   3                      }
  68   2                      if(key==KEY2_PRESS)
  69   2                      {
  70   3                              LED2=~LED2;
  71   3                      }
  72   2                      if(key==KEY3_PRESS)
  73   2                      {
  74   3                              LED3=~LED3;
  75   3                      }
  76   2                      if(key==KEY4_PRESS)
  77   2                      {
  78   3                              LED4=~LED4;
  79   3                      }
  80   2              }       
  81   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    182    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
